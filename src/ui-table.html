<link rel="import" href="../bower_components/core-list/core-list.html">

<polymer-element name="grid-cell" on-click="{{cellClicked}}">
  
  <template>
    <content></content>
  </template>
  
</polymer-element>

<polymer-element name="grid-sort-header" attributes="col direction sortprop active" 
  on-click="{{ toggleDirection }}">

  <template>
    <content></content>  
    <content select="[sort-icon]"></content>  
  </template>

</polymer-element>

<polymer-element name="grid-sort-icon" attributes="direction">  
  
  <template>    
    <link rel="stylesheet" type="text/css" href="./ui-table.less">    
    <icon sort-asc hide?="{{ direction != 'asc' }}"></icon>
    <icon sort-desc hide?="{{ direction != 'desc' }}"></icon>
    <icon sort hide?="{{ direction }}"></icon>
  </template>

</polymer-element>

<polymer-element name="ui-table" attributes="value sort url rowheight" on-ui-table-sort="{{sortColumn}}">
    
  <template>    
    <link rel="stylesheet" type="text/css" href="./ui-table.less">

    <!-- need to pull back in ability to pull in custom templates -->

    <content id="row" select="template[row]"></content>
    <content id="header" select="template[header]"></content>
      
    <template id="row-template">    
      <template repeat="{{ key in row | keys }}">
        <grid-cell flex col="{{key}}">
          {{ row[key] }}
        </grid-cell>
      </template>
    </template>
        
    <grid>                
      <grid-header horizontal layout>
        <template repeat="{{ header in headers }}">
          <grid-cell flex>
            <grid-sort-header sortprop="{{header}}" active="true" col="{{header}}">
              {{ header }} 
              <grid-sort-icon sort-icon></grid-sort-icon>          
            </grid-sort-header>          
          </grid-cell>
        </template>        
      </grid-header>      
      <grid-body>            
        <core-list data="{{ _value }}" height="{{ rowheight }}">
          <template>
            <grid-row horizontal layout style="height: {{ rowheight }}px;">
              <template ref="row-template" bind="{{}}"></template>
            </grid-row>
          </template>
        </core-list>      
      </grid-body>
    </grid>

  </template>

</polymer-element>

<script src="./ui-table.litcoffee"></script>